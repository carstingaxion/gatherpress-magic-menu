(()=>{"use strict";var e,t={79(){const e=window.wp.blocks,t=window.wp.hooks,a=window.wp.i18n,r=window.wp.blockEditor,n=window.wp.components,s=window.wp.data,o=window.wp.coreData,l=window.ReactJSXRuntime,i=JSON.parse('{"UU":"telex/block-gatherpress-magic-menu"}');(0,t.addFilter)("blocks.registerBlockType","telex-block-gatherpress-magic-menu/add-taxonomy-attribute",(e,t)=>{var a;return"core/navigation"!==t?e:{...e,allowedBlocks:[...null!==(a=e.allowedBlocks)&&void 0!==a?a:[],"telex-block-gatherpress-magic-menu"]}}),(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:t,className:i}){const{label:c,gatherpressTaxonomy:g,showEventCount:h,showTermEventCount:m}=e,p=(0,s.useSelect)(e=>{const{getTaxonomies:t}=e(o.store);return(t({per_page:-1})||[]).filter(e=>e.types&&e.types.includes("gatherpress_event"))},[]),u=(0,s.useSelect)(e=>{const{getPostType:t}=e(o.store);return t("gatherpress_event")},[]),v=()=>u&&u.labels&&u.labels.name?u.labels.name:(0,a.__)("Events","gatherpress-magic-menu"),b=[{label:(0,a.__)("All Events","gatherpress-magic-menu"),value:""},...(p||[]).map(e=>({label:e.name||e.slug,value:e.slug}))],w=(0,r.useBlockProps)({className:"wp-block-navigation-item wp-block-navigation-link"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.InspectorControls,{children:(0,l.jsxs)(n.PanelBody,{title:(0,a.__)("GatherPress Settings","gatherpress-magic-menu"),initialOpen:!0,children:[(0,l.jsx)(n.SelectControl,{label:(0,a.__)("Filter by Taxonomy","gatherpress-magic-menu"),value:g,options:b,onChange:e=>{t({gatherpressTaxonomy:e})},help:(0,a.__)('Select a taxonomy to filter events, or leave as "All Events" for the main archive.',"gatherpress-magic-menu")}),(0,l.jsx)(n.ToggleControl,{label:(0,a.__)("Show Event Count","gatherpress-magic-menu"),checked:h,onChange:e=>{t({showEventCount:e})},help:(0,a.__)("Display the number of upcoming events next to the main archive label.","gatherpress-magic-menu")}),g&&(0,l.jsx)(n.ToggleControl,{label:(0,a.__)("Show Term Event Count","gatherpress-magic-menu"),checked:m,onChange:e=>{t({showTermEventCount:e})},help:(0,a.__)("Display the number of upcoming events next to each term link.","gatherpress-magic-menu")})]})}),(0,l.jsx)("li",{...w,children:(0,l.jsxs)("a",{className:"wp-block-navigation-item__content",href:"#gatherpress-events-archive","aria-label":(0,a.__)("Link to GatherPress Events Archive","gatherpress-magic-menu"),children:[(0,l.jsx)(r.RichText,{identifier:"label",className:"wp-block-navigation-item__label",value:(()=>{let e=c||v();return h&&(e+=" "),e})(),onChange:e=>{t({label:e})},placeholder:v(),withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"],"aria-label":(0,a.__)("Navigation link text","gatherpress-magic-menu")}),h&&(0,l.jsx)("span",{className:`gatherpress-magic-menu__count ${i||""}`,children:"n"})]})})]})}})}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var s=a[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,a,n,s)=>{if(!a){var o=1/0;for(g=0;g<e.length;g++){for(var[a,n,s]=e[g],l=!0,i=0;i<a.length;i++)(!1&s||o>=s)&&Object.keys(r.O).every(e=>r.O[e](a[i]))?a.splice(i--,1):(l=!1,s<o&&(o=s));if(l){e.splice(g--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var g=e.length;g>0&&e[g-1][2]>s;g--)e[g]=e[g-1];e[g]=[a,n,s]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,s,[o,l,i]=a,c=0;if(o.some(t=>0!==e[t])){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(i)var g=i(r)}for(t&&t(a);c<o.length;c++)s=o[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(g)},a=globalThis.webpackChunkblock_gatherpress_magic_menu=globalThis.webpackChunkblock_gatherpress_magic_menu||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[350],()=>r(79));n=r.O(n)})();