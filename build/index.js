(()=>{"use strict";var e,n={117(){const e=window.wp.blocks,n=window.wp.hooks,t=window.wp.i18n,o=window.wp.blockEditor,s=window.wp.components,r=window.wp.data,a=window.wp.coreData,l=window.wp.element,i=window.ReactJSXRuntime,c=JSON.parse('{"UU":"gatherpress/magic-menu"}');(0,n.addFilter)("blocks.registerBlockType","gatherpress-magic-menu/add-taxonomy-attribute",(e,n)=>{var t;return"core/navigation"!==n?e:{...e,allowedBlocks:[...null!==(t=e.allowedBlocks)&&void 0!==t?t:[],"gatherpress-magic-menu"]}}),(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,context:n,setAttributes:c,className:u}){const{label:h,gatherpressTaxonomy:m,showEventCount:g,showTermEventCount:p}=e,{textColor:v,customTextColor:b,backgroundColor:d,customBackgroundColor:w,overlayTextColor:_,customOverlayTextColor:k,overlayBackgroundColor:x,customOverlayBackgroundColor:f,showSubmenuIcon:y}=n,C=(0,r.useSelect)(e=>{const{getTaxonomies:n}=e(a.store);return(n({per_page:-1})||[]).filter(e=>e.types&&e.types.includes("gatherpress_event"))},[]),j=(0,r.useSelect)(e=>{const{getPostType:n}=e(a.store);return n("gatherpress_event")},[]),T=()=>j&&j.labels&&j.labels.name?j.labels.name:(0,t.__)("Events","gatherpress-magic-menu"),O=(0,l.useMemo)(()=>{const e={};if(b&&(e.color=b),w&&(e.backgroundColor=w),Object.keys(e).length>0)return e},[b,w]),E=(0,l.useMemo)(()=>{const e={};if(k&&(e.color=k),f&&(e.backgroundColor=f),Object.keys(e).length>0)return e},[k,f]),N=(0,l.useMemo)(()=>{const e=["wp-block-navigation-item__content"];return v&&(e.push((0,t.sprintf)("has-%s-color",v)),e.push("has-text-color")),d&&(e.push((0,t.sprintf)("has-%s-background-color",d)),e.push("has-background")),e.join(" ")},[v,d]),S=(0,l.useMemo)(()=>{const e=["wp-block-navigation-item__content"];return _&&(e.push((0,t.sprintf)("has-%s-color",_)),e.push("has-text-color")),x&&(e.push((0,t.sprintf)("has-%s-background-color",x)),e.push("has-background")),e.join(" ")},[_,x]),B=[{label:(0,t.__)("All Events","gatherpress-magic-menu"),value:""}];if(C){const e=C.map(e=>{let n=e.slug;return e.name&&(n=e.name),{label:n,value:e.slug}});B.push(...e)}const M=(0,o.useBlockProps)({className:m?"wp-block-navigation-item wp-block-navigation-submenu has-child open-on-hover-click":"wp-block-navigation-item wp-block-navigation-link"});
// 		/* translators: 1: label text, 2: event count HTML */
return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.InspectorControls,{children:(0,i.jsxs)(s.PanelBody,{title:(0,t.__)("GatherPress Settings","gatherpress-magic-menu"),initialOpen:!0,children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Filter by Taxonomy","gatherpress-magic-menu"),value:m,options:B,onChange:e=>{c({gatherpressTaxonomy:e})},help:(0,t.__)('Select a taxonomy to filter events, or leave as "All Events" for the main archive.',"gatherpress-magic-menu")}),(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Show Event Count","gatherpress-magic-menu"),checked:g,onChange:e=>{c({showEventCount:e})},help:(0,t.__)("Display the number of upcoming events next to the main archive label.","gatherpress-magic-menu")}),m&&(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Show Term Event Count","gatherpress-magic-menu"),checked:p,onChange:e=>{c({showTermEventCount:e})},help:(0,t.__)("Display the number of upcoming events next to each term link.","gatherpress-magic-menu")})]})}),(0,i.jsxs)("li",{...M,children:[(0,i.jsxs)("a",{className:N,style:O,href:"#gatherpress-events-archive","aria-label":(0,t.__)("Link to GatherPress Events Archive","gatherpress-magic-menu"),children:[(0,i.jsx)(o.RichText,{identifier:"label",className:"wp-block-navigation-item__label",value:h||T(),onChange:e=>{c({label:e})},placeholder:T(),withoutInteractiveFormatting:!0,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"],"aria-label":(0,t.__)("Navigation link text","gatherpress-magic-menu")}),g&&(0,i.jsx)("span",{className:(0,t.sprintf)("gatherpress-magic-menu__count %s",u||""),dangerouslySetInnerHTML:{__html:"n"}}),m&&y&&(0,i.jsx)("span",{className:"wp-block-navigation__submenu-icon","aria-hidden":"true",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",role:"img","aria-hidden":"true",focusable:"false",children:(0,i.jsx)("path",{d:"M1.50002 4L6.00002 8L10.5 4",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})})]}),(()=>{if(!m)return null;const e=[(0,t.__)("Example Term 1","gatherpress-magic-menu"),(0,t.__)("Example Term 2","gatherpress-magic-menu")];return(0,i.jsx)("ul",{className:"wp-block-navigation__submenu-container",children:e.map((e,n)=>{let o=e;if(p){const n=(0,t.sprintf)('<span class="gatherpress-magic-menu__count %s">n</span>',u||"");o=(0,t.sprintf)(/* translators: 1: term name, 2: event count HTML */ /* translators: 1: term name, 2: event count HTML */
(0,t.__)("%1$s %2$s","gatherpress-magic-menu"),e,n)}return(0,i.jsx)("li",{className:"wp-block-navigation-item wp-block-navigation-link",children:(0,i.jsx)("a",{className:S,style:E,href:"#",children:(0,i.jsx)("span",{className:"wp-block-navigation-item__label",dangerouslySetInnerHTML:{__html:o}})})},n)})})})()]})]})}})}},t={};function o(e){var s=t[e];if(void 0!==s)return s.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,e=[],o.O=(n,t,s,r)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,s,r]=e[u],l=!0,i=0;i<t.length;i++)(!1&r||a>=r)&&Object.keys(o.O).every(e=>o.O[e](t[i]))?t.splice(i--,1):(l=!1,r<a&&(a=r));if(l){e.splice(u--,1);var c=s();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,s,r]},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var s,r,[a,l,i]=t,c=0;if(a.some(n=>0!==e[n])){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(i)var u=i(o)}for(n&&n(t);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},t=globalThis.webpackChunkblock_gatherpress_magic_menu=globalThis.webpackChunkblock_gatherpress_magic_menu||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var s=o.O(void 0,[350],()=>o(117));s=o.O(s)})();